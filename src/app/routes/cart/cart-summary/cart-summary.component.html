<toaster-container [toasterconfig]="toasterconfig"></toaster-container>
<div class="row" *ngIf="LoadUI == false">
  <div class="col-lg-12 no-gutters mt-5">
    <div class="d-flex align-middle align-items-center justify-content-center">
      <div class="ball-grid-pulse">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <div class="d-flex align-middle align-items-center justify-content-center">
      <h2 class="text-muted">Loading interfaces...</h2>
    </div>
  </div>
</div>

<div *ngIf="LoadUI == true">
  <div>
    <div class="row no-gutters bg-dark">
      <div class="col-md-4"></div>
      <div class="col-md-8">
        <div class="row no-gutters">
          <div class="col-md-12">
            <div class="col md-9">
              <div class="float-right">
                <button
                  class="mt-1 mb-1 mr-sm-1 btn btn-primary"
                  [routerLink]="['/shopping/summary']"
                >
                  Shop Again
                </button>
                <button
                  class="mt-1 mb-1 mr-sm-1 btn btn-warning"
                  [routerLink]="['/login']"
                >
                  Logout
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row p-2 no-gutters">
      <div class="col-md-12">
        <div class="row no-gutters">
          <div class="col-md-12">
            <div class="table-responsive">
              <table
                class="table table-striped scrolltable"
                #scrollMe
                [scrollTop]="scrollMe.scrollHeight"
              >
                <thead>
                  <tr>
                    <h3>Order# {{ cart?.id }}</h3>
                  </tr>
                  <tr>
                    <th class="col-md-4">Item</th>
                    <th class="col-md-3">Qty</th>
                    <th class="col-md-3">Price</th>
                    <th class="col-md-1"></th>
                    <th class="col-md-1"></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of items; let i = index">
                    <td>
                      <div class="row pl-2">
                        {{ item.name }}
                      </div>
                    </td>
                    <td>
                      <div class="row">
                        <b>{{ item.quantity }}</b
                        >x
                      </div>
                      <div class="row">
                        {{ item.price | number: "1.2-2" }}
                      </div>
                    </td>
                    <td class="text-right">
                      {{ item.total | number: "1.2-2" }}
                    </td>
                    <td>
                      <div class="row">
                        <button
                          class="btn btn-sm btn-outline-success mb-1"
                          (click)="add1Qty(i)"
                        >
                          <em class="icon-plus"></em>
                        </button>
                      </div>
                      <div class="row">
                        <button
                          class="btn btn-sm btn-outline-warning"
                          (click)="remove1Qty(i)"
                          [disabled]="
                            (saved_invoice == true && invoice?.status == 4) ||
                            invoice?.status == -4
                          "
                        >
                          <em class="icon-minus"></em>
                        </button>
                      </div>
                    </td>
                    <td>
                      <button
                        class="btn btn-sm btn-danger mt-3 mr-2"
                        (click)="removeFromCart(i, item)"
                        [disabled]="
                          (saved_invoice == true && invoice?.status == 4) ||
                          invoice?.status == -4
                        "
                      >
                        <em class="icon-trash"></em>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="row no-gutters p-1 bg-success">
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-6 text-md">NET TOTAL</div>
              <div class="col-md-6 text-right text-md">
                {{ subtotal.nettotal | number: "1.2-2" }}
              </div>
            </div>
          </div>
        </div>
        <div class="row no-gutters">
          <div class="col-md-12 mt-1 p-1">
            <div class="row">
              <div class="col-md-12 text-center">
                <button
                  class="btn btn-block btn-primary text-md"
                  (click)="addReferenceModal.show()"
                >
                  CHECKOUT
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- End of content -->
  </div>

  <div
    class="modal fade"
    bsModal
    #addReferenceModal="bs-modal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="mySmallModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-md modal-dialog-centered">
      <div class="modal-content">
        <div
          class="modal-header"
          style="background-color: #1a4669; color: #fff"
        >
          <h4 class="modal-title">Add Payment</h4>
          <button
            type="button"
            class="close"
            aria-label="Close"
            (click)="addReferenceModal.hide()"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-12">
                <div class="row">
                  <label class="col-sm-4 col-form-label text-right"
                    >Payment Method</label
                  >

                  <div class="col-md-8">
                    <select
                      class="form-control"
                      name="payment_method"
                      [(ngModel)]="payment_method"
                      (ngModelChange)="resetValues()"
                    >
                      <option value="null" disabled>
                        Please select the payment method
                      </option>
                      <option value="CASH ON DELIVERY">CASH ON DELIVERY</option>
                      <option value="ONLINE PAYMENT">ONLINE PAYMENT</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mt-3 card-footer text-center">
            <button
              class="btn btn-warning"
              type="button"
              (click)="CloseModal(addReferenceModal)"
            >
              Cancel
            </button>
            <button
              *ngIf="payment_method == 'CASH ON DELIVERY'"
              class="btn ml-1 btn-green"
              type="button"
              (click)="addDeliveryAddress.show()"
            >
              Continue
            </button>
            <button
              *ngIf="payment_method == 'ONLINE PAYMENT'"
              class="btn ml-1 btn-green"
              type="button"
              (click)="cardDetails.show()"
            >
              Add Card Details
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="modal fade"
    bsModal
    #cardDetails="bs-modal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="mySmallModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-md modal-dialog-centered">
      <div class="modal-content">
        <div
          class="modal-header"
          style="background-color: #1a4669; color: #fff"
        >
          <h4 class="modal-title">Add Card Details</h4>
          <button
            type="button"
            class="close"
            aria-label="Close"
            (click)="cardDetails.hide()"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-12">
                <div class="row mt-2">
                  <label class="col-sm-4 col-form-label text-right"
                    >Account Holder Name</label
                  >

                  <div class="col-md-8">
                    <input
                      class="form-control"
                      type="text"
                      name="account_name"
                      [(ngModel)]="account_name"
                    />
                  </div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="row mt-2">
                  <label class="col-sm-4 col-form-label text-right"
                    >Card Number</label
                  >

                  <div class="col-md-8">
                    <input
                      class="form-control"
                      type="number"
                      name="card_number"
                      [(ngModel)]="card_number"
                    />
                  </div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="row mt-2">
                  <label class="col-sm-4 col-form-label text-right"
                    >Expire Month</label
                  >

                  <div class="col-md-3">
                    <select
                      class="form-control"
                      name="month"
                      [(ngModel)]="month"
                    >
                      <option value="null" disabled>
                        Please select the expire month
                      </option>
                      <option value="January">01</option>
                      <option value="February">02</option>
                      <option value="March">03</option>
                      <option value="April">04</option>
                      <option value="May">05</option>
                      <option value="June">06</option>
                      <option value="July">07</option>
                      <option value="August">08</option>
                      <option value="September">09</option>
                      <option value="October">10</option>
                      <option value="November">11</option>
                      <option value="December">12</option>
                    </select>
                  </div>
                  <label class="col-sm-2 col-form-label text-right"
                    >Expire Year</label
                  >
                  <div class="col-md-3">
                    <select class="form-control" name="year" [(ngModel)]="year">
                      <option value="null" disabled>
                        Please select the expire year
                      </option>
                      <option value="2021">21</option>
                      <option value="2022">22</option>
                      <option value="2023">23</option>
                      <option value="2024">24</option>
                      <option value="2025">25</option>
                      <option value="2026">26</option>
                      <option value="2027">27</option>
                      <option value="2028">28</option>
                      <option value="2029">29</option>
                      <option value="2030">30</option>
                      <option value="2031">31</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="row mt-2">
                  <label class="col-sm-4 col-form-label text-right">CVV</label>

                  <div class="col-md-4">
                    <input
                      class="form-control"
                      type="number"
                      name="cvv"
                      [(ngModel)]="cvv"
                    />
                  </div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="row mt-2">
                  <label class="col-sm-4 col-form-label text-right"
                    >Email</label
                  >

                  <div class="col-md-8">
                    <input
                      class="form-control"
                      type="text"
                      name="aemail"
                      [(ngModel)]="aemail"
                    />
                  </div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="row mt-2">
                  <label class="col-sm-4 col-form-label text-right"
                    >Contact</label
                  >

                  <div class="col-md-8">
                    <input
                      class="form-control"
                      type="text"
                      name="contact"
                      [(ngModel)]="contact"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mt-3 card-footer text-center">
            <button
              class="btn btn-warning"
              type="button"
              (click)="CloseModal(cardDetails)"
            >
              Cancel
            </button>
            <button
              class="btn ml-1 btn-green"
              type="button"
              (click)="addDeliveryAddress.show()"
            >
              Submit Invoice
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="modal fade"
    bsModal
    #addDeliveryAddress="bs-modal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="mySmallModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-md modal-dialog-centered">
      <div class="modal-content">
        <div
          class="modal-header"
          style="background-color: #1a4669; color: #fff"
        >
          <h4 class="modal-title">Add Delivery Address</h4>
          <button
            type="button"
            class="close"
            aria-label="Close"
            (click)="addDeliveryAddress.hide()"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-12">
                <div class="row mt-2">
                  <label class="col-sm-4 col-form-label text-right"
                    >Contact Person Name</label
                  >

                  <div class="col-md-8">
                    <input
                      class="form-control"
                      type="text"
                      name="contace_person_name"
                      [(ngModel)]="contace_person_name"
                    />
                  </div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="row mt-2">
                  <label class="col-sm-4 col-form-label text-right"
                    >Contact Person Number</label
                  >

                  <div class="col-md-8">
                    <input
                      class="form-control"
                      type="text"
                      name="contace_person_number"
                      [(ngModel)]="contace_person_number"
                    />
                  </div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="row mt-2">
                  <label class="col-sm-4 col-form-label text-right"
                    >Address Line 1</label
                  >

                  <div class="col-md-8">
                    <input
                      class="form-control"
                      type="text"
                      name="address1"
                      [(ngModel)]="address1"
                    />
                  </div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="row mt-2">
                  <label class="col-sm-4 col-form-label text-right"
                    >Address Line 2</label
                  >

                  <div class="col-md-8">
                    <input
                      class="form-control"
                      type="text"
                      name="address2"
                      [(ngModel)]="address2"
                    />
                  </div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="row mt-2">
                  <label class="col-sm-4 col-form-label text-right">City</label>

                  <div class="col-md-8">
                    <input
                      class="form-control"
                      type="text"
                      name="city"
                      [(ngModel)]="city"
                    />
                  </div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="row mt-2">
                  <label class="col-sm-4 col-form-label text-right"
                    >Email</label
                  >

                  <div class="col-md-8">
                    <input
                      class="form-control"
                      type="text"
                      name="email"
                      [(ngModel)]="email"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mt-3 card-footer text-center">
            <button
              class="btn btn-warning"
              type="button"
              (click)="CloseModal(addDeliveryAddress)"
            >
              Cancel
            </button>
            <button
              class="btn ml-1 btn-green"
              type="button"
              (click)="submitCardDetails(addReferenceModal)"
            >
              Finish
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
